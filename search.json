[{"title":"python selenium笔记","path":"/2024/02/20/202402201132/","content":"有些场景不能用BeautifulSoup解决，例如一些弹框点击，模拟操作浏览器页面，这个时候，就得使用selenium 安装selenium1pip3 install selenium 安装chrome和驱动chromedriverchrome官方下载地址 chromedriver国内驱动 chrome和chromedriver的版本号要对应才可以 上面的驱动已经没有更新最新驱动了。可以在下面链接获取匹配的驱动 chromedriver国内最新镜像驱动 windows配置环境变量 二选一 把下载的chromedriver.exe复制到chrome的chrome.exe同目录，并且复制到python.exe同目录下 或者把chromedriver.exe的路径添加到windows的系统环境变量 linux配置 chrome和chromedriver需要相同版本，所以我们安装指定版本，目前最新版本是121.0.6167.185，但是驱动只更新到121.0.6167.184 下载121.0.6167.184版本的chromedriver 123wget https://storage.googleapis.com/chrome-for-testing-public/121.0.6167.184/linux64/chromedriver-linux64.zip -O chromedriver_linux64.zip#解压unzip chromedriver_linux64.zip -d / 下载安装121.0.6167.184版本的chrome 123wget https://dl.google.com/linux/chrome/deb/pool/main/g/google-chrome-stable/google-chrome-stable_121.0.6167.184-1_amd64.debsudo dpkg -i google-chrome-stable_121.0.6167.184-1_amd64.debsudo apt-get install -f 添加环境变量 12sudo mv /chromedriver /usr/local/bin/sudo sh -c &#x27;echo &quot;PATH=\\$PATH:/usr/bin/google-chrome:/usr/local/bin/chromedriver&quot; &gt;&gt; /etc/environment&#x27; 基础使用12345from selenium import webdriverdriver = webdriver.Chrome()driver.get(&#x27;http://www.baidu.com/&#x27;)#... ChromeOptions配置1234567891011121314151617181920212223from selenium import webdriver# 创建ChromeOptions实例option = webdriver.ChromeOptions()#禁用了Chrome浏览器的沙箱功能。沙箱是一种安全机制，用于限制进程的权限，以防止恶意软件对系统进行攻击。禁用沙箱可能会增加系统的风险option.add_argument(&#x27;--no-sandbox&#x27;)#禁用了Chrome浏览器在/dev/shm上创建临时文件的使用。在某些情况下，使用这个选项可以提高性能或解决一些特定的问题option.add_argument(&#x27;--disable-dev-shm-usage&#x27;)#禁用了Chrome浏览器的扩展功能，即禁止加载和运行浏览器扩展程序。这可以用于确保浏览器的纯净性，或者解决一些与扩展程序相关的问题option.add_argument(&#x27;--disable-extensions&#x27;)#将Chrome浏览器设置为无头模式，即在没有图形界面的情况下运行。这对于自动化测试、爬虫和其他需要在后台运行的任务非常有用option.add_argument(&#x27;--headless&#x27;)#禁用了Chrome浏览器中的信息栏，例如保存密码的提示等option.add_argument(&#x27;--disable-extensions&#x27;)#禁用了Chrome浏览器中的信息栏，例如保存密码的提示等option.add_argument(&#x27;--disable-infobars&#x27;)#禁用了浏览器的客户端导航，即禁止通过JavaScript导航到新的页面。这可以用于防止某些类型的网络攻击option.add_argument(&#x27;--disable-browser-side-navigation&#x27;)# 添加代理设置(此处我使用的是socks5 http代理：proxy-server=https://127.0.0.1:8888)option.add_argument(&#x27;proxy-server=socks5://127.0.0.1:8888&#x27;)#其他..driver = webdriver.Chrome(options=option)driver.get(&#x27;http://www.baidu.com/&#x27;)#... 还有一个很常用的。等待元素出现。例如点击A按钮之后，过一会才会出现B元素，那么需要使用到WebDriverWait 12345678910111213141516171819from selenium import webdriverfrom selenium.webdriver.common.by import Byfrom selenium.webdriver.support.ui import WebDriverWaitfrom selenium.webdriver.support import expected_conditions as EC# 创建ChromeOptions实例option = webdriver.ChromeOptions()option.add_argument(&#x27;--headless&#x27;)option.add_argument(&#x27;--disable-extensions&#x27;)option.add_argument(&#x27;proxy-server=socks5://127.0.0.1:8888&#x27;)driver = webdriver.Chrome(options=option)driver.get(&#x27;http://www.baidu.com/&#x27;)# 使用 WebDriverWait 等待页面加载完成(此处是等待 class为enter-btn的元素出现,再执行之后的代码)wait = WebDriverWait(driver, 10)wait.until(EC.presence_of_element_located((By.CLASS_NAME, &#x27;enter-btn&#x27;)))#... 新标签页如果有打开新标签页的情况可以使用 123456789101112131415#...# 记录当前窗口句柄handles = driver.window_handles# 点击 a 链接(此处会打开新标签页)pick_links[0].click()# 等待新窗口打开wait.until(EC.new_window_is_opened(handles))# 切换到新窗口handles = driver.window_handlesdriver.switch_to.window(handles[-1])#... find_element 用法 根据id寻找元素 1element.find_element(By.ID, &#x27;postlist&#x27;) 根据class寻找元素，如果会找到多个。就用find_elements 1element.find_element(By.CLASS_NAME, &#x27;enter-btn&#x27;) 根据id，模糊寻找message_ 1element.find_element(By.XPATH, &quot;//*[contains(@id, &#x27;message_&#x27;)]&quot;) 根据class模糊寻找元素message_ 1element.find_element(By.XPATH, &#x27;.//*[contains(@class, &quot;message_&quot;)]&#x27;) 以上用法基本可以满足涉及到selenium的日常脚本需求了。","tags":["python"],"categories":["技术"]},{"title":"nt/mp配置微信互动","path":"/2023/12/04/1701680167/","content":"nt&#x2F;mp配置微信互动 前言部署前提需要一个VPS代理转发没有VPS的，如果ip变动了需要去微信后台改可信ip 1.创建微信应用首先打开企业微信后台 点注册 创建应用 把自己勾上 记下这几个参数 设置API接收 token和key随机获取，并记下来，然后这里不通过没关系。先配置代理 应用管理界面最下面的可信ip填写vps的ip(不用VPS代理的，填公网ip地址，如果变化了就要及时更改可信ip) PS:到此处，没有VPS代理的直接跳转第三步 2.VPS代理转发如果你连SSH工具都不会使用，可以移步ssh工具 ssh链接上VPS。输入以下代码，每输入一行，按一次回车等待执行完成之后复制下一个命令回车。 1apt-get update &amp;&amp; apt-get upgrade -y 1apt-get install nginx 1rm -rf /etc/nginx/sites-enabled/default 1apt-get install nano -y 然后修改nginx配置文件,执行下面命令 1nano /etc/nginx/sites-enabled/wechat 上面这个命令会打开一个界面。把下面的代码(记得修改自己的nas域名和端口)复制进去，记得右键点粘贴进去。(ssh工具默认ctrl+c和ctrl+v不是复制粘贴。请用右键粘贴!!!)请注意/wechat和/api/v1/message是二选一，nt选/wechat，mp选/api/v1/message，自行修改 12345678910111213141516171819202122232425262728server &#123; listen 5001; location /cgi-bin/gettoken &#123; proxy_pass https://qyapi.weixin.qq.com; &#125; location /cgi-bin/message/send &#123; proxy_pass https://qyapi.weixin.qq.com; &#125; location /cgi-bin/menu/create &#123; proxy_pass https://qyapi.weixin.qq.com; &#125; location /wechat &#123; proxy_pass http://nas域名:nt端口; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; &#125; location /api/v1/message/ &#123; proxy_pass http://nas域名:mp端口; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; &#125;&#125; 然后是保存配置文件。小白如果不会保存，按照我下面说的执行ctrl+x，然后输入y,最后按回车就可以了 重启nginx让配置文件生效 1systemctl restart nginx 1systemctl enable nginx 以上，就配置好了转发了。 3.nt或者mp配置修改企业ID对应上面截图的参数1应用Secret对应上面截图的参数3应用ID对应上面截图的参数2剩下的回调页面的key和token也填进去 重要的就是下面这两个： 有VPS第二步配置了代理的这么填写 消息推送代理填 :http://vpsip:5001nt企业微信回调地址填 :http://vpsip:5001/wechatmp企业微信回调地址填 :http://vpsip:5001/api/v1/message/?token=moviepilot 如果你设置了mp的token,吧moviepilot替换成你的token 没有VPS，没有配置代理的 消息推送代理填 :不填nt企业微信回调地址填 :http://nasip:nt端口/wechatmp企业微信回调地址填 :http://nasip:mp端口/api/v1/message/?token=moviepilot 如果你设置了mp的token,吧moviepilot替换成你的token (每次动态公网变化ip，都需要手动去微信后台添加可信ip)","tags":["pt"],"categories":["技术"]},{"title":"部署hysteria2","path":"/2023/11/28/1701150004/","content":"hysteria2比传统的机场速度更快 前言部署前提1.你需要一个域名2.一个VPS3.最好不要使用centos7,会有内核或者别的问题不好处理，我已经踩坑了，换成ubuntu就可以 1.一键脚本服务端1curl -fsSL -o hysteria.sh https://raw.gitmirror.com/z594lh/hysteria2/main/hysteria.sh 1chmod -R 777 hysteria.sh 1./hysteria.sh 跟着提示选择就行。 域名这里，请把域名添加dns解析。注意，不要用cloudflare的黄色云朵，只解析就可以。如果用小云朵可能会像这样报错,重新执行一遍脚本就行 新手建议选单端口模式!!这里忘记截图了 成功之后会显示配置文件 你可以执行命令查看是否启动成功 1systemctl status hysteria-server 2.报错排查如果启动失败。是下面这样的 你可以执行代码查看一下报错 1/usr/local/bin/hysteria --log-level debug -c /etc/hysteria/config.yaml server 这是我第一次执行失败的时候的报错截图，可以看到，是生成证书失败了也许你是其他问题。 如果跟我一样的是证书问题，解决办法有两个1.你可以重新执行脚本重新生成证书，2.你也可以自签,下面是自签的命令请注意替换mydomain.com为你的域名 1openssl req -x509 -nodes -newkey ec:&lt;(openssl ecparam -name prime256v1) -keyout /etc/hysteria/server.key -out /etc/hysteria/server.crt -subj &quot;/CN=mydomain.com&quot; -days 36500 &amp;&amp; sudo chown hysteria /etc/hysteria/server.key &amp;&amp; sudo chown hysteria /etc/hysteria/server.crt 然后替换生成的证书路径。如图 执行脚本，选择3，再选3重启hysteria服务。再查看服务状态 1systemctl status hysteria-server 如果还有报错。请回到报错排查的方法执行查看具体报错再解决 3.配置客户端把服务端的hy-client.yaml配置文件下载到本地。 点击前往 hysteria2下载地址 点击下面show more 选择 hysteria-windows-amd64.exe 下载 点击前往 v2ray下载地址 选择zz开头的 把下载下来的hysteria-windows-amd64.exe放到zz_v2rayN-With-Core-SelfContained\\bin\\hysteria文件夹里，覆盖里面的hysteria-windows-amd64.exe 打开v2ray，点击左上角服务器，添加自定义服务器 切换到自动配置系统代理即可科学上网啦","tags":["科学上网"],"categories":["技术"]},{"title":"pyinstaller打包问题","path":"/2023/11/25/1606py/","content":"写脚本打包踩坑记录 起因 某HD家九周年抽奖 30秒能抽一次。每次抽完要返回刷新才能继续抽 我能抽好几十次，算下来可能要半个小时了，想写个脚本代劳 他这个抽奖，要先访问一次主抽奖页面，点击抽奖，然后刷新当前抽奖页面获取新的key，再抽。如果直接复制抽奖链接重复访问会显示错误。所以简单的循环访问直接pass，涉及到抓页面内容，我想到了python 但是我不会啊！！我不会python，只是稍微看过一点点。没关系，趁这机会学习一波 安装python环境 1.下载 Python 安装程序： 访问 Python 官方网站 ，在主页中选择最新版本的 Python，并下载 Windows 安装程序 (.exe 文件)。 2.运行安装程序： 双击下载的 .exe 文件运行安装程序。确保在安装过程中选择添加 Python 到系统 PATH。 在安装程序的初始界面，确保勾选 “Add Python to PATH” 选项。 单击 “Customize installation” 按钮，可以选择安装的组件。默认情况下，应该选择 “Install for all users” 和 “Add Python to PATH”。 在 “Advanced Options” 界面，可以选择 “Precompile standard library” 以提高性能。 3.完成安装： 单击 “Install Now” 开始安装 Python。安装完成后，会出现一个 “Setup was successful” 的界面。 4.验证安装： 打开命令提示符（CMD）或 PowerShell，运行以下命令验证 Python 是否安装成功： 1python --version 或者使用以下命令： 1python -m ensurepip --default-pip 如果成功，将显示 Python 版本信息。 现在，你已经成功在 Windows 上安装了 Python。你可以使用命令行运行 Python 解释器，或者创建和运行 Python 脚本。 写脚本点击展开123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104import osimport sysimport configparserimport requestsimport http.cookiesfrom bs4 import BeautifulSoupimport time# 获取打包后的临时目录temp_dir = getattr(sys, &#x27;_MEIPASS&#x27;, os.path.abspath(os.path.dirname(__file__)))print(temp_dir)# 构建配置文件的完整路径config_path = os.path.join(temp_dir, &#x27;config.ini&#x27;)config = configparser.RawConfigParser()# 检查配置文件是否存在if not os.path.exists(config_path): # 如果不存在，创建并初始化配置文件 config[&#x27;Credentials&#x27;] = &#123; &#x27;cookie&#x27;: &#x27;your_default_cookie_value&#x27;, &#x27;Lottery_numbe&#x27;: &#x27;your_default_lottery_number&#x27;, &#x27;circulate&#x27;: &#x27;your_default_circulate_value&#x27; &#125; with open(config_path, &#x27;w&#x27;) as config_file: config.write(config_file)else: # 如果存在，读取配置文件 config.read(config_path)# 赋值Cookie = config.get(&#x27;Credentials&#x27;, &#x27;cookie&#x27;)Lottery_numbe = config.get(&#x27;Credentials&#x27;, &#x27;Lottery_numbe&#x27;)circulate = int(config.get(&#x27;Credentials&#x27;, &#x27;circulate&#x27;))# 判断是否有一个变量不存在或为空if not Cookie or not Lottery_numbe or not circulate: print(&quot;At least one variable is missing or empty. Exiting...&quot;) exit()# 初始的 URLinitial_url = &#x27;https://hdhome.org/lottery.php&#x27;def get_last_column_link(html_content,Lottery_numbe): soup = BeautifulSoup(html_content, &#x27;html.parser&#x27;) outer_div = soup.find(id=&quot;outer&quot;) target_td = outer_div.find_all(&quot;td&quot;, string=lambda text: text and Lottery_numbe in text) last_td = target_td[0].find_parent(&quot;tr&quot;).find_all(&quot;td&quot;)[-1] last_a = last_td.find(&quot;a&quot;) if last_a: return last_a.get(&quot;href&quot;) else: return &#x27;&#x27;# 设置请求头和 Cookieheaders = &#123; &#x27;Accept&#x27;: &#x27;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7&#x27;, &#x27;Accept-Language&#x27;: &#x27;zh-CN,zh;q=0.9,en;q=0.8&#x27;, &#x27;Cache-Control&#x27;: &#x27;max-age=0&#x27;, &#x27;Connection&#x27;: &#x27;keep-alive&#x27;, &#x27;Sec-Fetch-Dest&#x27;: &#x27;document&#x27;, &#x27;Sec-Fetch-Mode&#x27;: &#x27;navigate&#x27;, &#x27;Sec-Fetch-Site&#x27;: &#x27;same-origin&#x27;, &#x27;Sec-Fetch-User&#x27;: &#x27;?1&#x27;, &#x27;Upgrade-Insecure-Requests&#x27;: &#x27;1&#x27;, &#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36&#x27;, &#x27;sec-ch-ua&#x27;: &#x27;&quot;Google Chrome&quot;;v=&quot;119&quot;, &quot;Chromium&quot;;v=&quot;119&quot;, &quot;Not?A_Brand&quot;;v=&quot;24&quot;&#x27;, &#x27;sec-ch-ua-mobile&#x27;: &#x27;?0&#x27;, &#x27;sec-ch-ua-platform&#x27;: &#x27;&quot;Windows&quot;&#x27;,&#125;cookie_dict = http.cookies.SimpleCookie(Cookie)cookies = &#123;key: morsel.value for key, morsel in cookie_dict.items()&#125;# 循环访问和获取链接for _ in range(circulate): # 发送 GET 请求，设置 Referer headers[&#x27;Referer&#x27;] = initial_url response = requests.get(initial_url, headers,cookies=cookies) # 检查是否成功 if response.status_code == 200: # 获取href link_href = get_last_column_link(response.text,Lottery_numbe) if len(link_href) &lt; 1: print(&#x27;当前奖品已经抽完，无法继续抽奖&#x27;) exit() # 拼接完整url full_url = f&#x27;&#123;initial_url&#125;&#123;link_href&#125;&#x27; print(f&#x27;Full URL: &#123;full_url&#125;&#x27;) # 发送 GET 请求，设置 Referer headers[&#x27;Referer&#x27;] = full_url response = requests.get(full_url, headers,cookies=cookies) rst_text = response.text soup = BeautifulSoup(rst_text, &#x27;html.parser&#x27;) main = soup.find_all(class_=&quot;main&quot;)[1] rst_text = main.find_all(class_=&quot;text&quot;)[0].text print(rst_text) # exit() # 设置访问间隔为32秒 time.sleep(32) 把cookie和抽奖设置和次数放config.ini的。当然本地执行没什么问题，问题是如何给别人使用，我想让没有python环境的人也能一键执行脚本，所以在一番GPT的搜索之后，选择了pyinstaller进行打包 打包脚本 首先要安装pyinstaller 1pip install pyinstaller 打包命令 1pyinstaller --onefile hdhdraw.py 打包很顺利。但是执行之后，不出意外。报错了,看报错信息，应该是config没读取到，使用了默认的数据导致字符串转数字报错了！ 并且.exe目录如果没有config.ini的话，我设置了没有就会新建默认的config.ini，但是并没有生成config.ini 打印了一下加载的config.ini的路径。发现在C:\\Users\\93481\\AppData\\Local\\Temp_MEI179042 ,这应该是在打包过程中的临时目录。 说明我这行代码一点R用没有1temp_dir = getattr(sys, &#x27;_MEIPASS&#x27;, os.path.abspath(os.path.dirname(__file__))) 换一个写法，其实中间我折腾了很久，都是这个路径无法加载真实执行脚本所在路径导致config加载不出来，下面这个写法能访问到打包后脚本真实的执行路径。12345678def get_script_directory(): if getattr(sys, &#x27;frozen&#x27;, False): # The application is frozen (i.e., a standalone executable) return os.path.dirname(sys.executable) elif __file__: # The script is running in a normal Python environment return os.path.dirname(os.path.realpath(__file__)) return None 最后，完整的最终脚本。经过我放在另一台虚拟机的测试，可以完美执行。不依赖环境点击展开123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123import osimport sysimport configparserimport requestsimport http.cookiesfrom bs4 import BeautifulSoupimport time# 获取脚本所在目录的路径def get_script_directory(): if getattr(sys, &#x27;frozen&#x27;, False): # The application is frozen (i.e., a standalone executable) return os.path.dirname(sys.executable) elif __file__: # The script is running in a normal Python environment return os.path.dirname(os.path.realpath(__file__)) return None# 获取脚本所在目录script_dir = get_script_directory()# 构建配置文件的完整路径config_path = os.path.join(script_dir, &#x27;config.ini&#x27;)config = configparser.RawConfigParser()# 检查配置文件是否存在if not os.path.exists(config_path): # 如果不存在，创建并初始化配置文件 config[&#x27;Credentials&#x27;] = &#123; &#x27;cookie&#x27;: &#x27;&#x27;, &#x27;Lottery_numbe&#x27;: 38, &#x27;circulate&#x27;: 20 &#125; with open(config_path, &#x27;w&#x27;) as config_file: config.write(config_file)else: # 如果存在，读取配置文件 config.read(config_path, encoding=&#x27;utf-8&#x27;)# 赋值Cookie = config.get(&#x27;Credentials&#x27;, &#x27;cookie&#x27;)Lottery_numbe = config.get(&#x27;Credentials&#x27;, &#x27;Lottery_numbe&#x27;)# 读取配置文件circulate_str = config.get(&#x27;Credentials&#x27;, &#x27;circulate&#x27;, fallback=20)# 尝试将字符串转换为整数，如果失败则使用默认值try: circulate = int(circulate_str)except ValueError: circulate = 20# 判断是否有一个变量不存在或为空if not Cookie or not Lottery_numbe or not circulate: print(&quot;At least one variable is missing or empty. sys.exit()g...&quot;) time.sleep(3) sys.exit()# 初始的 URLinitial_url = &#x27;https://hdhome.org/lottery.php&#x27;def get_last_column_link(html_content,Lottery_numbe): print(Lottery_numbe) soup = BeautifulSoup(html_content, &#x27;html.parser&#x27;) outer_div = soup.find(id=&quot;outer&quot;) target_td = outer_div.find_all(&quot;td&quot;, string=lambda text: text and Lottery_numbe in text) last_td = target_td[0].find_parent(&quot;tr&quot;).find_all(&quot;td&quot;)[-1] last_a = last_td.find(&quot;a&quot;) if last_a: return last_a.get(&quot;href&quot;) else: return &#x27;&#x27;# 设置请求头和 Cookieheaders = &#123; &#x27;Accept&#x27;: &#x27;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7&#x27;, &#x27;Accept-Language&#x27;: &#x27;zh-CN,zh;q=0.9,en;q=0.8&#x27;, &#x27;Cache-Control&#x27;: &#x27;max-age=0&#x27;, &#x27;Connection&#x27;: &#x27;keep-alive&#x27;, &#x27;Sec-Fetch-Dest&#x27;: &#x27;document&#x27;, &#x27;Sec-Fetch-Mode&#x27;: &#x27;navigate&#x27;, &#x27;Sec-Fetch-Site&#x27;: &#x27;same-origin&#x27;, &#x27;Sec-Fetch-User&#x27;: &#x27;?1&#x27;, &#x27;Upgrade-Insecure-Requests&#x27;: &#x27;1&#x27;, &#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36&#x27;, &#x27;sec-ch-ua&#x27;: &#x27;&quot;Google Chrome&quot;;v=&quot;119&quot;, &quot;Chromium&quot;;v=&quot;119&quot;, &quot;Not?A_Brand&quot;;v=&quot;24&quot;&#x27;, &#x27;sec-ch-ua-mobile&#x27;: &#x27;?0&#x27;, &#x27;sec-ch-ua-platform&#x27;: &#x27;&quot;Windows&quot;&#x27;,&#125;cookie_dict = http.cookies.SimpleCookie(Cookie)cookies = &#123;key: morsel.value for key, morsel in cookie_dict.items()&#125;# 循环访问和获取链接for _ in range(circulate): # 发送 GET 请求，设置 Referer headers[&#x27;Referer&#x27;] = initial_url response = requests.get(initial_url, headers,cookies=cookies) # 检查是否成功 if response.status_code == 200: # 获取href link_href = get_last_column_link(response.text,Lottery_numbe) if len(link_href) &lt; 1: print(&#x27;当前奖品已经抽完，无法继续抽奖&#x27;) time.sleep(3) sys.exit() # 拼接完整url full_url = f&#x27;&#123;initial_url&#125;&#123;link_href&#125;&#x27; print(f&#x27;Full URL: &#123;full_url&#125;&#x27;) # 发送 GET 请求，设置 Referer headers[&#x27;Referer&#x27;] = full_url response = requests.get(full_url, headers,cookies=cookies) rst_text = response.text soup = BeautifulSoup(rst_text, &#x27;html.parser&#x27;) main = soup.find_all(class_=&quot;main&quot;)[1] rst_text = main.find_all(class_=&quot;text&quot;)[0].text print(rst_text) # sys.exit() # 设置访问间隔为32秒 time.sleep(32) 完结撒花虽然脚本完成了，我自己跑了一下，10分钟就把魔力跑完了(写脚本1小时，跑了10分钟，好家伙，不如手动抽奖2333)，然后也找不到其他需要用他的人(认识的好像手动已经吧魔力抽完了- -),就当学习了一下啦！ 打包完成的最终脚本文件提取码：8lsn","tags":["python"],"categories":["技术"]},{"title":"建行ETC踩坑","path":"/2023/11/24/jianhangETC/","content":"最后真没蚌埠住 某宝建行车主会 申请ETC，填了资料就会给你邮寄过来。 然后第一步，撕开粘贴条，贴在挡风玻璃上(我是粘在右上角了，不知道对不对 ) 扫码进去激活 打开蓝牙和位置，ETC侧边按钮按两下亮绿灯之后，就可以在某宝点最后一步蓝牙激活了 到这一步我始终在转圈激活中。反复弄了好几遍也连不上。 怀疑过很多因素，都没用，最后把支付宝升级到最新版本，成功连上ETC激活了。","tags":["踩坑"],"categories":["生活"]},{"title":"购买黑五VPS","path":"/2023/11/23/chicagoVPS/","content":"便宜没好货? 起因听说hysteria 据说垃圾变飞机。想试一试，首先需要买个VPS，盯上了黑五机子，便宜大碗。 盯上了这款，嗯..确实大碗 [黑五 ChicagoVPS]https://www.daniao.org/21229.html 果断掏钱付款。付完款之后，发现机子一直没开机，状态pending 好的。下午再看看。然后到了晚上还是pending 我有点顶不住，提交了工单，客服居然让我提交支付证明？？？（小声BB：难道你们自己后台不能查看我有没有支付吗？） 跟他拉扯了一会，这一问一答一天过去了。然而机子还是没开机 直到现在，21号购买的，现在23号了，还没开机。 到底是我运气不好，还是这家需要避雷 洗洗睡 康康他到底什么时候能给我开机。 2023 年 11 月 24 日 21时更新一下。已经开机了。但是ssh巨卡，稍后有空装一下hysteria2试试怎么样2023 年 11 月 24 日 09时他喵的，还没给我开机。2023 年 11 月 22 日 10时客服：I have assigned your ticket to our billing team. They will address your ticket as soon as possible.Our billing team is available Monday - Friday 9AM till 5PM EST.翻译：我已将您的机票分配给我们的计费团队。他们会尽快处理您的机票。我们的计费团队在美国东部时间周一至周五上午9点至下午5点提供服务。2023 年 11 月 22 日 09时我提供了支付凭证和发票2023 年 11 月 21 日 17时客服：Please provide us the paid Invoice transaction ID with snapshot翻译：请向我们提供带快照的已付款发票交易ID2023 年 11 月 21 日 16时提交工单2023 年 11 月 21 日 09时付款","tags":["随笔"],"categories":["其他"]},{"title":"猫站认领脚本","path":"/2023/11/21/猫站认领脚本/","content":"猫站没有一键认领,手点太累了 1.登录猫站 进入个人信息页面,打开做种列表,点卡查看全部记录 2.键盘按F12，找到控制台 3.复制下面这段代码 123456789101112131415161718document.querySelectorAll(&#x27;.claim-confirm&#x27;).forEach(function (element) &#123; var _this = element; var _dataurl = _this.getAttribute(&#x27;data-url&#x27;); var post_url = &#x27;https://pterclub.com/&#x27; + _dataurl; var xhr = new XMLHttpRequest(); xhr.open(&#x27;GET&#x27;, post_url, true); xhr.onload = function () &#123; if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300) &#123; console.log(xhr.responseText); &#125; else &#123; console.error(&#x27;Request failed with status &#x27; + xhr.status); &#125; &#125;; xhr.send();&#125;); 4.回车执行代码。5.如果种子比较多，你需要切换到下一页。再重复复制代码，回车的操作。一次认领一页","tags":["工具"],"categories":["pt"]},{"title":"配置seedbox","path":"/2023/11/10/seedbox/","content":"部署seedbox(盒子) 1.ssh工具这个工具主要作用是连接服务器，第二步所使用的所有命令，都是在这个软件连接上服务器之后操作的。 主流用xshell，我个人习惯使用 NxShell [官网链接]https://nxshell.github.io/ 如果不会在官网下，也可以去网盘直接下载 [网盘下载]https://www.123pan.com/s/HQeA-OX1Sh 当然如果你喜欢xshell或者putty，可以自己去找资源下载 下载完成之后安装。无脑下一步 打开NxShell 新建连接 169215456464 填写ip,账号，密码 169132156561 连接成功，如图 169132156162 2.接下来要配置seedbox安装一键脚本(最后三个参数是QB的 账号，密码，缓存大小， 可以先和我一样，记住账号密码就行) 1bash &lt;(wget -qO- https://raw.githubusercontent.com/i-abc/Dedicated-Seedbox/main/Install.sh) admin admin 1 1697100454230 键盘输入y，回车 1697100483560 我们选择4.3.9版本，所以键盘输入9，回车 deluge不安装，输入n，回车 1697100587478 autoremove-torrents也不安装。输入n，回车 然后是BBR了，这个要安装，输入y，回车 1697100697092 这里输入n，回车 1697100756309 如图，已经安装成功了。reboot重启一下。就可以访问qb了 1697101055972 1697101141132","tags":["刷流"],"categories":["pt"]},{"title":"彩虹岛速通指北","path":"/2023/10/14/chd/","content":"低成本爆刷上传量 0.前言这篇教程主要是低成本刷流教程。通过选择便宜主机、合并硬盘、自动拆包删种等手段实现自动化低成本获取大量上传。 如果不选择HZC，也可以选择别的盒子，可以直接跳到第五步 有情提醒，不是所有站点都不禁止自动拆包，具体请看各个站点的规则 1.首先是关于这个公告.1697093489450 这个呢，别怕，如果真的要禁你自动化的话，就不会开放RSS链接啦。既然有RSS，那肯定是支持qb的rss和nastools自动订阅的啦。不过RSS周期建议5分钟以上 至于这条公告，我想应该是禁止爬虫刷流 “抓免”和“抓HR”。毕竟岛不禁盒。如果再用爬虫抓免抓HR避开收费和HR，那可真是刷爽了(不是) 2.seedbox选择 本教程使用HZC作为seedbox(盒子) HZC : 全称hetzner。 因为我是老用户（注册超过了3个月），且消费了超过20欧。就可以有推荐链接。以下是我的推荐链接，点我的推荐链接注册可获得20欧元的赠送（人称白嫖），网上有很多注册的教程。虽然现在注册较难，但是还是有人能成功。 我的推荐链接 :https://hetzner.cloud/?ref=1mZEhki3HD6l 选择无税区，使用真实 IP 和资料注册，不要开代理，姓名、地址、邮箱等要如实填写。 没有信用卡的话，付款方式可以选 PayPal，出于信任，Hetzner 实际上并不会验证你是否真的有 PayPal，把试用金用完就收手，有没有信用卡、PayPal 都无所谓。另外提一句，[PayPal](https://www.paypal.com/) 挺好注册的，区域选中国、绑定银行账户可选储蓄卡，能搞定国外绝大部分商家的付款。 准备好身份证、手机，在注册完成后会进行人脸识别验证。 前往 Hetzner Cloud 的 [USAGE](https://console.hetzner.cloud/usage) 处查询试用金是否到账。 注册成功后，为了避免新人风控，建议不要立马高强度使用，不要频繁地创建、删除服务器。 还可以前往 USAGE，在 REDEEM CODE 处输入 LTT23（ 2023 年可用的新兑换码），有几率再得 20 欧 接下来是使用hetzner刷上传的教程。首先。使用推荐链接注册成功之后有20欧的启动资金。白嫖的20欧按照我的方法可以刷3个月(300T小意思(0.0))。 3.新建VPS和硬盘首先登陆hzc。创建一个project 1697095987265 点进去创建server 选择Falkenstein，debian11, x86 选择cpx11 1697096166936 点击右下角create 点击左边的volumes创建一个存储块 1697096281390 1697096351407 硬盘大小随便。看个人财力和你觉得够不够用，创建之后此时可以看到CPX11上面显示硬盘大小为40G+80G 1697096678008 4.合并硬盘在VPS管理界面，如图点击左边目录RESCUE-Enable rescue&amp;power cycle就是启动救援模式，自动重启。我们再SSH登陆时就是救援模式了。 1697096709597 1697096723979 1697096755657 已经进入救援模式了 1697097174629 然后输入 installimage 回车 1installimage 选择debian 1697097278936 选择debian-1107 1697097295047 选择ok进入 1697099146199 1697097401356 PART &#x2F; ext4 all修改成下面代码 1234UEFI##PART /boot ext4 512MPART lvm vg0 allLV vg0 root / ext4 all 按两次ESC。一直选yes。就会重启 1697097541784 输入reboot回车重启机器 1697097578219 等待重启完成，SSH登陆，输入如下代码将volume与主硬盘根目录合并，即可完成 1pvcreate -ff /dev/sdb 1vgextend vg0 /dev/sdb 1lvresize -l +100%FREE vg0/root 1resize2fs /dev/vg0/root 1697099352058 到这里。已经把两块硬盘合并了。在这里解释一下，为什么要这样做。因为HZC的cpx11的配置2核CPU刷个pt也够了，如果换成3核心的CPX21，价格翻一倍。硬盘只多了40G。非常不划算。至于内存可以添加swap分区新增4G内存。 4. 添加swap分区新增虚拟内存1sudo fallocate -l 4G /swapfile 1sudo chmod 600 /swapfile 1sudo mkswap /swapfile 1sudo swapon /swapfile 要使更改永久，打开&#x2F;etc&#x2F;fstab文件： 1sudo nano /etc/fstab 最后一行并粘贴以下行： 1/swapfile swap swap defaults 0 0 ctrl+x 退出，按Y确定。然后回车确定 1697099933508 查看虚拟内存情况。如图，已经成功了 123sudo swapon --show sudo free -h 1697099965477 此时这个VPS就变成了2核6G内存 120G ssd硬盘的小鸡了 5.接下来要配置seedbox安装一键脚本(最后三个参数是QB的 账号，密码，缓存大小， 可以先和我一样，记住账号密码就行) 1bash &lt;(wget -qO- https://raw.githubusercontent.com/i-abc/Dedicated-Seedbox/main/Install.sh) admin admin 1 1697100454230 键盘输入y，回车 1697100483560 我们选择4.3.9版本，所以键盘输入9，回车 deluge不安装，输入n，回车 1697100587478 autoremove-torrents也不安装。输入n，回车 然后是BBR了，这个要安装，输入y，回车 1697100697092 这里输入n，回车 1697100756309 如图，已经安装成功了。reboot重启一下。就可以访问qb了 1697101055972 1697101141132 用之前脚本预先设置的密码登录qb，设置qb一些参数。如果不懂就跟着我设置就行了 1697101338743 1697101446572 1697101473812 6.配置拆包和自动删种docker一键安装docker脚本 1curl -sSL https://get.docker.com/ | sh 验证是否安装成功 1systemctl status docker 1697102426248 跟我一样就是成功安装docker了,ctrl+c退出 拉取我打包的qbtools镜像 1docker pull zhongyw/qbtools 创建配置文件 1234cd /mkdir qbtoolscd qbtoolsnano config.ini 把下面的代码，根据自己的情况，修改，注意！！最起码要修改qb的服务器，ip，端口，账号和密码 四个 其他的可以不用管 1234567891011121314151617181920212223242526272829303132333435; config.ini;qb是需要拆包的qb的ip，端口，账号，密码[qb]host = 127.0.0.1port = 8080username = adminpassword = admin;拆包配置。[partpackage];raite:拆包比例raite = 0.15;min_size:拆包后最小是多少Gmin_size = 5;max_size：拆包后最大多少Gmax_size = 10;single_file_size: single_file_category设置的分类小于single_file_size时，不拆包;single_file_size和single_file_category非必填.;single_file_category a,b,c为qb里的分类single_file_size = 10single_file_category = a,b,c;限速(M)upspeed = 90dlspeed = 90limit_category = a,b,c;删种配置(两个参数都是必填)[removetorrents];free_size:系统还剩多少空间(G)。开始删种(根据上传速度，上传连接数，下载连接数 三个因素排序，选出最差的种子删除)free_size = 30;deletenum:一次删几个deletenum = 3[iyuu]token = &#x27;&#x27; 复制进去之后，ctrl+x退出。按y确定。回车退出 然后运行镜像 1docker run -d -v /qbtools/config.ini:/config/config.ini zhongyw/qbtools:latest 查看运行情况 1docker ps -a 1697103308449 这个样子就是成功运行了 查看日志 1docker logs -f c24128b99a0f c24128b99a0f是上面的镜像id。 1697103393672 日志出现3个done，就是没问题了。 7. 回去先备案一下盒子ip1697105411322 8. 接下来回到QB。把RSS启动。性能原因，先限制一下速度。不然速度全部满载的情况会卡死。如果有钱，你可以选高配机子 1697105237240 1697101577143 1697101598243 1697101624524 先把RSS链接当前的全部已读，我们只下最新的种子(这个很重要) 1697101676986 1697103459956 添加分类“a” 1697103487526 1697101716143 正则表达式： 1CHDWEB.*\\D([1-9]|[1-9]\\d|1\\d&#123;2&#125;)\\.\\d&#123;2&#125;\\sGB 1697103532856 点击保存。搞定坐等上传量","tags":["刷流"],"categories":["pt"]},{"path":"/wiki/index.html","content":"wiki欢迎来到我的笔记小站！ 终生学习的重要性不"},{"path":"/notes/index.html","content":"常用站点欢迎来到我的便笺！ cloud sitevercel1云服务平台,支持静态网站(纯静态页面,没有接口数据交互)和动态网站的应用部署、预览和上线netlify一款基于云服务的静态网站托管和自动化部署平台leancloud云数据库mongodbmongodb云数据库cloudflareCDN"},{"title":"关于我","path":"/about/index.html","content":"QAQ githubhttps://github.com/z594lhhttps://github.com/z594lh dockerhttps://hub.docker.com/u/zhongywhttps://hub.docker.com/u/zhongyw 友链 留言板"},{"title":"随便说说","path":"/notes/随笔/index.html","content":"-.-2024 年 02 月 20 日新的一年，加油吧2023 年 11 月 23 日今天优化了一下便签栏。没那么丑了，放一张我的雪萝帅照2023 年 10 月 21 日真别说，hexo部署起来挺累的，比wordpress繁琐多了。但是没办法，谁让我喜欢这个简洁风呢，这个快速响应的UI谁又不爱呢。"},{"title":"友链","path":"/friends/index.html","content":"留言板"}]